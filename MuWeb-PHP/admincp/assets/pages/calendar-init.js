!function(a){var b=function(){};b.prototype.init=function(){if(a.isFunction(a.fn.fullCalendar)){a("#external-events .fc-event").each(function(){var d={title:a.trim(a(this).text())};a(this).data("eventObject",d);a(this).draggable({zIndex:999,revert:true,revertDuration:0})});var e=new Date();var c=e.getDate();var f=e.getMonth();var g=e.getFullYear();a("#calendar").fullCalendar({header:{left:"prev,next today",center:"title",right:"month,basicWeek,basicDay"},editable:true,eventLimit:true,droppable:true,drop:function(i,d){var j=a(this).data("eventObject");var h=a.extend({},j);h.start=i;h.allDay=d;a("#calendar").fullCalendar("renderEvent",h,true);if(a("#drop-remove").is(":checked")){a(this).remove()}},events:[{title:"All Day Event",start:new Date(g,f,1)},{title:"Long Event",start:new Date(g,f,c-5),end:new Date(g,f,c-2)},{id:999,title:"Repeating Event",start:new Date(g,f,c-3,16,0),allDay:false},{id:999,title:"Repeating Event",start:new Date(g,f,c+4,16,0),allDay:false},{title:"Meeting",start:new Date(g,f,c,10,30),allDay:false},{title:"Lunch",start:new Date(g,f,c,12,0),end:new Date(g,f,c,14,0),allDay:false},{title:"Birthday Party",start:new Date(g,f,c+1,19,0),end:new Date(g,f,c+1,22,30),allDay:false},{title:"Click for Google",start:new Date(g,f,28),end:new Date(g,f,29),url:"http://google.com/"}]});a("#add_event_form").on("submit",function(h){h.preventDefault();var d=a(this).find(".new-event-form"),i=d.val();if(i.length>=3){var k="new"+Math.random().toString(36).substring(7);a("#external-events").append('<div id="'+k+'" class="fc-event">'+i+"</div>");var j={title:a.trim(a("#"+k).text())};a("#"+k).data("eventObject",j);a("#"+k).draggable({revert:true,revertDuration:0,zIndex:999});d.val("").focus()}else{d.focus()}})}else{alert("Calendar plugin is not installed")}},a.CalendarPage=new b,a.CalendarPage.Constructor=b}(window.jQuery),function(a){a.CalendarPage.init()}(window.jQuery);